## 박상윤 Part

### 메모리의 기본 개념

- 메모리란?
    - 데이터와 명령어를 저장하고 CPU가 이를 신속하게 접근할 수 있도록 하는 컴퓨터의 핵심 하드웨어 자원
    - 일반적으로 RAM(주기억장치)이 사용되며, 휘발성 메모리로 전원이 꺼지면 데이터가 사라짐
        
        ![image (2)](https://github.com/user-attachments/assets/6cc3c2e4-4b71-4a07-91e4-31e8e5e02ed3)

- 메모리의 특징 = **지역성**
    - **지역성** : 데이터 접근이 시간적, 혹은 공간적으로 가깝게 일어나는 것
    - **시간적 지역성(Temporal locality)** : 특정 데이터가 한 번 접근되었을 경우, 가까운 미래에 또 한 번 데이터에 접근할 가능성이 높음
    - **공간적 지역성(Spatial locality)** : 액세스 된 기억장소와 인접한 기억 장소가 액세스 될 가능성이 높음
    - 지역성 원리를 이용하여 계층으로 구성됨 → 성능 결정 요인 : 기억용량(capacity), 접근시간(access time), 사이클 시간(cycle time), 기억장치 대역포(bandwidth), 가격(cost)

---

### 메모리 계층 구조 = 기억장치 계층 구조

- 세 가지 주요 특성인 **용량, 접근속도, 비용** 간의 절충 관계를 파악해 필요에 따라 채택할 수 있게 나타낸 구조
- 피라미드 형태로 위에서부터 아래로 **레지스터 → 캐시 → 메모리(RAM) → 하드 디스크(SSD/HDD)** 순으로 나열

![image (3)](https://github.com/user-attachments/assets/a1d735fe-c28e-44e2-859f-9e4c80002a31)

- 위로 갈수록:
    - 접근 속도가 빠름
    - 용량이 작음
    - 가격(단가)이 비쌈
- 아래로 갈수록:
    - 접근 속도가 느림
    - 용량이 큼
    - 가격(단가)이 저렴함
        
        ![image (4)](https://github.com/user-attachments/assets/2d5e0d9a-a106-4043-9094-779f72802a76)

- 메모리를 필요에 따라 여러 종류로 나누면 **CPU가 메모리에 더 빨리 접근** 가능함
- 각각의 특징이 있는 서로 다른 종류의 저장 장치를 함께 사용하여 **최적의 효율**을 낼 수 있음

1. **레지스터(Register)** 🚄
    - **CPU가 요청을 처리하는 데 필요한 데이터를 일시적으로 저장하는 기억장치**
        - CPU 내부에 위치하며, 가장 빠른 접근 속도를 제공
        - 용량이 매우 제한적이지만, 연산에 필요한 데이터를 즉시 저장하고 불러올 수 있음
        - 비용이 매우 높고, 크기도 작기 때문에 시스템의 성능에 직접적인 영향을 미침
    - **역할:**
        - 연산에 사용되는 임시 데이터, 주소, 제어 정보 등을 저장
        - CPU 명령어 실행 시 가장 먼저 접근되는 메모리로, 프로그램의 효율적인 실행에 필수적
    - **CPU 내부 레지스터 종류**
        - 프로그램 계수기(PC, Program Counter) - 다음에 실행할 명령어의 주소를 가지고 있는 레지스터
        - 누산기(AC, ACcumulator) - 연산 결과 데이터를 일시적으로 저장하는 레지스터
        - 명령어 레지스터(IR, Instruction Register) - 현재 수행 중인 명령어를 가지고 있는 레지스터
        - 상태 레지스터(SR, Status Register) - 현재 CPU의 상태를 가지고 있는 레지스터
        - 메모리 주소 레지스터(MAR, Memory Address Register) - 메모리로부터 읽어오거나 메모리에 쓰기 위한 주소를 가지고 있는 레지스터
        - 메모리 버퍼 레지스터(MBR, Memory Buffer Register) - 메모리로부터 읽어온 데이터 또는 메모리에 써야할 데이터를 가지고 있는 레지스터
        - 입출력 주소 레지스터(I/O AR, I/O Address Register) - 입출력 장치에 따른 입출력 모듈의 주소를 가지고 있는 레지스터
        - 입출력 버퍼 레지스터(I/O BR, I/O Buffer Register) - 입출력 모듈과 프로세서 간의 데이터 교환을 위해 사용되는 레지스터

1. **캐시(Cache) 🚗**
    - **사용되었던 데이터는 다시 사용되어질 가능성이 높다**는 개념을 이용하여 데이터나 값을 **미리 복사해 놓는 임시 장소**
        
        ![image (5)](https://github.com/user-attachments/assets/8b77bc11-82ce-42b5-87aa-942e8b4a9685)

    - **중앙처리장치(CPU)와 주기억장치(RAM) 간의 속도 차이 개선을 목적 → 병목 현상을 완화**하기 위한 범용 메모리
        - 캐시의 접근 시간에 비해 원래 데이터를 접근하는 시간이 오래 걸리는 경우
        - 값을 다시 계산하는 시간을 절약하고 싶은 경우
    - **구성**
        
        ![image (6)](https://github.com/user-attachments/assets/247127ea-579e-4431-8ddf-d0c4dcc09def)

        - L1 캐시:
            - CPU 코어 내부에 존재하며, 가장 빠르고 작은 캐시
            - 보통 명령어 캐시와 데이터 캐시로 분리되어 있으며, 접근 시간이 1~2 사이클 정도로 매우 빠름
            - 일반적으로 CPU 칩안에 내장되어 데이터 사용 및 참조에 가장 먼저 사용되는 캐시 메모리
        - L2 캐시:
            - L1보다 크지만 약간 느린 캐시로, 각 코어 내 혹은 코어와 공유되는 형태로 구현
            - L1 캐시에서 찾지 못한 데이터를 저장하며, 접근 시간은 L1보다는 길지만 여전히 메인 메모리보다는 빠름
            - L1 캐시 메모리와 용도와 역할이 비슷
            - 속도 : L1 캐시 > L2 캐시 > 일반메모리(RAM)
        - L3 캐시:
            - 다수의 CPU 코어가 공유하는 캐시로, 크기가 크고 접근 속도는 L1, L2보다 느리지만 메인 메모리보다는 빠름
            - 대부분 CPU가 아닌 메인보드에 내장
            - L1, L2 캐시와의 다르게 CPU 성능에 직접적인 영향을 끼치지 않음
    - **역할 및 원리**
        - **지역성(Locality) 원칙:**
            - 프로그램은 시간적, 공간적 지역성을 보이는 특성이 있어, 최근에 사용되거나 인접한 데이터가 재사용될 가능성이 큼
            - 캐시 메모리는 이러한 지역성에 기반하여 데이터를 임시 저장해, 메인 메모리보다 빠른 속도로 데이터에 접근할 수 있도록 함
        - **성능 향상:**
            - CPU가 데이터에 접근할 때 캐시 히트율이 높으면, 전체 시스템의 평균 메모리 접근 시간이 크게 단축
    - 그 외 용어들
        - 디스크 캐시(=디스크 버퍼):
            - 하드 디스크에 내장된 작은 컴퓨터가 소유한 작은 메모리
            - 일종의 기법(하드디스크와 RAM 사이 존재)
        - 페이지 캐시:
            - 운영체제의 메인 메모리를 하드 디스크에 복사해 놓는 캐시
        - 캐시히트(Cache Hit):
            - 캐시 메모리에 찾는 데이터가 존재하였을 때
        - 캐시미스(Cache Miss):
            - 캐시 메모리에 찾는 데이터가 존재하지 않을 때, 메모리 저장소로부터 필요한 데이터를 찾아 캐시 메모리에 로드
        - 캐시매핑(Cache mapping):
            - 캐시가 히트되기 위해 매핑하는 방법

1. **메인 메모리(Main Memory) 🛵**
    - **주 기억장치**
    - 컴퓨터에서 수치, 명령, 자료 등을 기억하는 컴퓨터 하드웨어 장치
    - **RAM(Random Access Memory) : 휘발성 기억 장치**
        - 빠른 액세스를 위해 데이터를 단기간 저장하는 구성 요소
        - 사용자가 요청하는 프로그램이나 문서를 스토리지 디스크에서 메모리로 로드하여 각각의 정보에 액세스
        - 전원이 유지되는 동안 CPU의 연산 및 동작에 필요한 모든 내용이 저장
        - 전원 종료시 기억된 내용 삭제
        - `Random Access` : 어느 위치에서든 똑같은 속도로 접근하여 읽고 쓸 수 있다는 의미
        - DRAM과 SRAM이 있는데 주기억장치는 DRAM을 의미(SRAM은 캐시나 레지스터)
        
        > **DRAM - Dynamic RAM**
        > 
        > - 동적 메모리
        > - 전원이 계속 공급되더라도 주기적으로 재충전되어야 기억된 내용을 유지할 수 있음
        > - 주로 대용량의 기억장치에 사용되며 가격이 저렴
        > 
        > **SRAM - Static RAM (주기억장치 X)**
        > 
        > - 정적 메모리
        > - 전원 공급이 되는 동안은 기록된 내용이 지워지지 않기 때문에 재충전이 필요없음
        > - 접근 속도가 빠르고 가격이 비싸다는 특징이 있으며 주로 **캐시메모리나 레지스터로 사용됨**
        > 
        > **ROM(Read Only Memory)** : **고정 기억** 장치
        > 
        > - 컴퓨터에 지시사항을 영구히 저장하는 **비휘발성** 메모리
        > - 전원 종료시 기억된 내용 유지
        > - 변경 가능성이 희박한 기능 및 부품에 사용
        >     - 소프트웨어 : 초기 부팅 관련 부분
        >     - 하드웨어 : 프린터 작동에 관여하는 펌웨어 명령 등
        > - ROM은 주기억장치로 사용되기보다는 주로 기본 입,출력 시스템(BIOS), 자가 진단 프로그램(POST)같은 변경 가능성이 희박한 시스템 소프트웨어를 기억시키는데 이용한다.
    - **역할**
        - 실행 중인 프로그램과 운영체제의 데이터를 저장하며, CPU는 필요에 따라 이곳에서 데이터를 읽고 씀
        - **메모리 관리 기법(페이징, 세그먼테이션)**을 통해 CPU의 요구에 따라 동적으로 데이터를 할당하고 보호

1. **보조 기억장치** **(Auxiliary Memory, Secondary Memory) 🚲**
    - 물리적 디스크가 연결되어 있는 기억장치
    - **HDD(Hard Disk Driver), SDD(Solid State Driver)**
    - 컴퓨터 전원을 꺼도 저장된 데이터가 사라지지 않음(**비휘발성**)
    - 중앙처리장치와 직접 자료 교환 불가능
    - 접근시간이 오래 걸림
    - 일반적으로 주기억장치에 데이터를 저장할 때에는 DMA방식 사용
        - DMA(Direct Memory Access) - 주변장치들이 메모리에 직접 접근하여 읽거나 쓸 수 있도록 하는 기능
        - **CPU의 개입 없이** I/O 장치와 기억장치 사이의 데이터를 전송하는 접근 방식
    - CPU 직접 접근 불가
    
    > **주기억장치 vs 보조기억장치**
    > 
    > 
    > 주기억 장치인 메모리는 CPU가 직접 접근 가능하지만, 보조기억장치인 디스크는 먼저 주기억 장치에 적재되어야 CPU가 접근 가능함
    > 
    > **CPU**
    > 
    > : 사람의 두뇌
    > 
    > **메모리**
    > 
    > : 작업을 위한 공간(ex.책상,메모지) : CPU가 뭔가를 처리할 때 작업을 하는 공간
    > 
    > **저장장치(디스크)**
    > 
    > :저장을 위한 공간(ex.책장,정리노트) : 작업결과를 나중에 찾아 볼 수 있도록 작업의 내용을 저장하는 공간, 저장장치의 종류에는 컴퓨터 안에 들어 있는 하드디스크, 별도로 연결하는 외장하드, USB등이 있음
    > 
    - 역할
        - 데이터를 **영구적으로 저장하는 역할**을 하며, 메인 메모리가 부족할 때 **가상 메모리(Virtual Memory) 시스템**을 통해 일시적인 데이터 저장소로 활용
        - 운영체제와 애플리케이션, 사용자 데이터를 보관하는 데 사용

---

### 물리 메모리와 가상 메모리

- **물리 메모리(Physical Memory)**
    - 실제 하드웨어에 존재하는 메모리로, 주로 DRAM 형태로 구현
    - **특징:**
        - **실제 하드웨어 자원 -** 시스템에 설치된 메모리 칩들이며, 용량은 하드웨어에 의해 제한됨
        - **연속적 주소 공간 -** 운영체제는 물리 메모리를 하나의 연속된 주소 공간으로 인식함
        - **휘발성 -** 전원이 차단되면 저장된 데이터가 사라짐
        - **고속 접근 -** CPU가 직접 접근할 수 있어 빠른 데이터 읽기/쓰기 가능
- **가상 메모리(Virtual Memory)**
    - 운영체제가 제공하는 메모리의 추상화 개념으로, 각 프로세스에게 자신만의 독립된 주소 공간을 부여함
    - 실제 물리 메모리보다 큰 주소 공간을 사용할 수 있게 하며, 물리 메모리의 제약을 극복하는 데 도움을 줌
    - **특징:**
        - **주소 공간 추상화:** 각 프로세스는 자신만의 가상 주소 공간(예: 32비트, 64비트)을 가지며, 이는 실제 물리 메모리와는 별개로 운영체제에 의해 관리됨
        - **주소 변환:** CPU가 생성하는 가상 주소는 페이지 테이블과 MMU(Memory Management Unit)를 통해 물리 주소로 변환됨
        - **메모리 보호 및 격리:** 각 프로세스의 가상 메모리는 서로 독립적이며, 잘못된 접근을 방지하기 위해 보호 기법이 적용됨
        - **확장성:** 가상 메모리는 디스크와 같은 보조 기억장치를 활용해 실제 물리 메모리보다 더 큰 메모리 공간처럼 사용할 수 있도록 함(예, 스와핑, 페이징)

---

### 물리 메모리와 가상 메모리의 상호작용

- **주소 변환**
    - CPU가 가상 주소를 생성하면, MMU는 페이지 테이블을 참고하여 해당 가상 주소를 대응하는 물리 주소로 변환함
    - 이 과정을 통해 가상 메모리 상의 데이터가 실제 물리 메모리 어디에 저장되어 있는지 결정됨
- **메모리 확장과 보호**
    - 가상 메모리를 사용하면 각 프로세스는 제한 없이 큰 주소 공간을 사용할 수 있고, 다른 프로세스와 격리되어 보호됨
    - 물리 메모리는 제한적이지만, 운영체제가 스와핑과 페이징을 활용하여 필요한 데이터만 물리 메모리에 로드함으로써 효율적인 메모리 사용이 가능해짐
- **효율적인 자원 관리**
    - 가상 메모리 기법은 물리 메모리의 단편화 문제를 줄이고, 자주 사용되지 않는 데이터를 디스크로 옮기는 등 메모리 자원의 효율적 관리 및 최적화를 가능하게 함
